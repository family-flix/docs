# 云盘索引说明

当开始索引，我们会从设置的「索引目录」开始，获取它的文件夹，以及子文件夹。

当索引到影视剧文件，如 `mp4`结尾、`mkv`结尾等等，程序会分析它的名字，从中尝试获取名称、季数、集数等信息。

如 `小谢尔顿.S05E09.mp4`，会解析出

| 名称     | 季     | 集     |
| -------- | ------ | ------ |
| 小谢尔顿 | 第五季 | 第九集 |

这是比较顺利的，大部分影视剧资源的名字是 「X 小谢尔顿/第一季/01.mp4」，所以我们索引到文件时，拿到的名字是 `01.mp4`，这时程序会获取它的父文件夹名字，看看是否能解析出名字，如果还是获取不到，继续往父文件夹找，直到找到，或者报错，提示该影视剧没有匹配的名字。

依靠这个流程，我们会解析出云盘内所有的影视剧资源，得出它们可能是哪些电视剧，可能是第几季、第几集。
接着，我们拿着这些解析出的结果，去 `TMDB`（最全面的影视剧数据库网站）按名字搜索。

搜索到了，继续匹配季信息、再匹配集信息。搜索不到，就在网页中「解析结果」页面展示，需要我们手动为它选择一个正确的信息。

> 一般当前热剧会出现这种情况，它们的名字往往会用字母替换一两个字。或者干脆就是分享者写错了。也可能是名字过于复杂没有解析出正确的名称。

目前绝大部分「国产剧」的名字是可以解析出的，做了非常多的适配，像 「天道 4K 无删减收藏版」、「如懿传-2018-内地.三无.内封英文字幕」、「[4K 超高清修复]《天道》无删减完整版第 9 集\_超清 4K.mp4」这种，都是特例，通过额外的代码来解析。
所以如果遇到一些无法解析的名字，可以留言给我，我进行适配，或者增加「自定义解析规则」

当索引结束后，就能在「电视剧」页面看到详细的信息了

![22.png](/images/f0b13cd8aae7b955020a2eef0f93700a.png)

重点关注的是简介下面的标签，如果该电视剧集数完整，就展示「全 x 集」。
如果处于更新，但没有关联一个分享资源（称为没有更新任务」，就会出现「x 个问题」，并且鼠标悬浮时会说明具体什么问题。

![42.png](/images/140cd1d4d5ea399fd1fa48368a198957.png)

现在有这几种可能

1. 处于更新但没有更新任务
2. 已完结但集数不全
3. 有更新任务但对应的分享资源已失效（被分享者取消了）

这几种情况都需要前往「同步任务」页面更新更新任务

到这里影视剧都已经有了，接下来就可以观看了。目前只有移动端网页，直接微信输入地址或扫描二维码即可观看，无需下载任何 APP。

下面介绍如何能在微信观看影视剧。
